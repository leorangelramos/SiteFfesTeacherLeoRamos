<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Treino de Escrita em inglês: Encontre o Erro | Professor Leo Ramos</title>
    <meta name="description" content="Melhore sua escrita em inglês corrigindo erros gramaticais comuns. Exercício interativo com feedback imediato.">
    <meta name="author" content="Leo Ramos">
    <meta name="robots" content="index, follow">
    
    <link rel="canonical" href="https://teacherleoramos.com.br/ExListen/writing.html">
    
    <link rel="icon" type="image/png" sizes="32x32" href="../Images/logofavicion.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../Images/logofavicion.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../Images/logofavicion.png">
    <link rel="icon" type="image/png" sizes="192x192" href="../Images/logofavicion.png">
    <link rel="icon" type="image/png" sizes="512x512" href="../Images/logofavicion.png">

    <meta property="og:title" content="Writing Challenge: Encontre o Erro">
    <meta property="og:description" content="Você consegue identificar o erro gramatical nesta frase? Teste seu inglês escrito agora.">
    <meta property="og:image" content="https://teacherleoramos.com.br/Images/preview-social.jpg">
    <meta property="og:url" content="https://teacherleoramos.com.br/ExListen/writing.html">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="pt_BR">
    <meta property="og:site_name" content="FFES - Professor Leo Ramos">

    <link rel="stylesheet" href="../CSS/universal.css"> 

    <style>
        /* Banner (Padrão das outras páginas) */
        .content-banner {
            max-width: 900px;
            margin: 0 auto;
            text-align: center;
        }
        .content-banner h2 {
            color: var(--cor-texto-claro); 
            border-bottom: 2px solid rgba(255, 255, 255, 0.3);
            text-shadow: 1px 1px 3px rgba(0,0,0,0.6);
        }
        .content-banner p {
            color: #ecf0f1;
            font-size: 1.15em;
            margin-bottom: 20px;
        }

        /* Área de Seleção de Nível (Copiado do reading.html) */
        .level-selection-area {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .btn-level {
            padding: 12px 20px;
            background-color: var(--cor-primaria); /* Azul Escuro */
            color: var(--cor-texto-claro);
            border: 2px solid var(--cor-acento);
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: background-color 0.2s ease, transform 0.2s ease;
        }

        .btn-level:hover {
            background-color: var(--cor-primaria-hover);
            transform: translateY(-2px);
        }

        /* Botão de nível ativo/selecionado */
        .btn-level.active {
            background-color: var(--cor-acento);
            color: var(--cor-primaria);
            border-color: var(--cor-primaria);
        }

        /* Container do Jogo */
        .writing-container {
            background: white;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            text-align: center;
            border-top: 6px solid var(--cor-acento);
            
            /* Oculta inicialmente (Copiado do reading.html) */
            opacity: 0;
            max-height: 0;
            padding-top: 0;
            padding-bottom: 0;
            overflow: hidden;
            transition: opacity 0.5s ease-in-out, max-height 0.5s ease-in-out, padding 0.5s ease-in-out;
        }
        
        .writing-container.visible {
            opacity: 1;
            max-height: 2000px; /* Valor alto para acomodar o conteúdo */
            padding: 30px;
        }


        /* Caixa da Frase Errada */
        .error-box {
            background-color: #fadbd8; /* Vermelho claro */
            border-left: 5px solid var(--cor-erro);
            color: var(--cor-erro);
            padding: 20px;
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 25px;
            border-radius: 4px;
            font-family: 'Courier New', Courier, monospace; /* Estilo "código/erro" */
        }

        /* Label */
        .instruction-label {
            display: block;
            text-align: left;
            font-weight: bold;
            margin-bottom: 8px;
            color: var(--cor-primaria);
        }

        /* Input do Usuário */
        .user-input {
            width: 100%;
            padding: 15px;
            font-size: 1.1em;
            border: 2px solid #ccc;
            border-radius: 8px;
            box-sizing: border-box;
            margin-bottom: 20px;
            transition: border-color 0.3s;
            outline: none;
        }

        .user-input:focus {
            border-color: var(--cor-primaria);
        }

        /* Feedback Area */
        .feedback-area {
            margin-top: 15px;
            padding: 15px;
            border-radius: 6px;
            font-weight: normal;
            display: none;
            text-align: left;
        }
        
        .feedback-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            display: block;
        }
        
        .feedback-error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
            display: block;
        }

        .btn-area {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        /* Responsividade */
        @media (max-width: 600px) {
            .error-box { font-size: 1.1em; }
            .user-input { font-size: 1em; }
        }
    </style>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Treino de Writing: Correção de Erros",
      "description": "Exercício interativo para identificar e corrigir erros gramaticais em inglês.",
      "url": "https://teacherleoramos.com.br/ExListen/writing.html",
      "author": {
        "@type": "Person",
        "name": "Leo Ramos"
      },
      "applicationCategory": "EducationalApplication",
      "provider": {
        "@type": "ProfessionalService",
        "name": "FFES - Professor Leo Ramos"
      }
    }
    </script>
</head>
<body>

<div class="cabecalho-container">
    <header class="bloco-identidade">
        <div class="logo-and-title">
            <a href="../index.html">
                <img src="../Images/logo novo grande.png" alt="Logo FFES" class="logo-img">
            </a>
            <a href="../index.html" style="text-decoration: none; color: inherit;">
                <h1>Leo Ramos | Professor de Inglês</h1>
            </a>
        </div>
    </header>

<div class="bloco-navegacao"> 
    <nav class="nav-primary">
        <ul>
            <li><a href="/index.html#home">Home</a></li>
            <li><a href="/index.html#sobre">Sobre Mim</a></li>
            <li><a href="/exercicios-e-artigos.html#exercicios">Exercícios</a></li>
            <li><a href="/exercicios-e-artigos.html#artigos-vocab">Artigos</a></li>
            <li><a href="/cursos-e-ebook.html#cursos">Cursos e E-book</a></li>
            <li><a href="/index.html#metodologia">Metodologia</a></li>
        </ul>
    </nav>
</div>

</div>

<main>
    <section class="content-banner">
        <h2>Writing Challenge - Corrija a Frase</h2>
        <p>Identifique o erro gramatical e reescreva a frase completa corretamente.</p>
        
        <div class="level-selection-area">
            <button class="btn-level" data-level="A1" onclick="selectLevel('A1', this)">A1 Básico</button>
            <button class="btn-level" data-level="A2" onclick="selectLevel('A2', this)">A2 Pré-Intermediário</button>
        </div>

        <div id="writing-container" class="writing-container">
            
            <p id="level-info" style="font-style: italic; margin-bottom: 20px; color: #666;"></p>
            <p style="margin-bottom: 10px; color: #555;">Frase incorreta:</p>
            <div id="question-display" class="error-box">Selecione um nível para começar.</div>

            <label class="instruction-label" for="answer-input">Sua correção:</label>
            <input type="text" id="answer-input" class="user-input" placeholder="Digite a frase completa e corrigida aqui..." autocomplete="off" disabled>

            <div class="btn-area">
                <button class="cta-button" id="check-button" onclick="checkAnswer()" disabled>✔ Verificar</button>
                <button class="cta-button" id="next-button" style="background-color: #95a5a6; color: white;" onclick="loadNextQuestion()" disabled>➜ Pular / Próxima</button>
            </div>

            <div id="feedback-display" class="feedback-area"></div>
            
            <div style="margin-top: 20px; font-size: 0.9em; color: #7f8c8d;">
                Questão <span id="q-current">--</span> de <span id="q-total">--</span>
            </div>

        </div>
    </section>
</main>

<footer id="contato" class="site-footer">
    <div class="footer-content">
        <div class="social-media-links">
            <h4>Siga-me nas redes sociais</h4>
            <a href="https://www.youtube.com/@teacherleoramos" target="_blank" rel="noopener noreferrer" title="YouTube"><img src="https://img.icons8.com/ios-filled/50/ffffff/youtube-play.png" alt="YouTube"></a>
            <a href="https://www.instagram.com/teacherleoramos/" target="_blank" rel="noopener noreferrer" title="Instagram"><img src="https://img.icons8.com/ios-filled/50/ffffff/instagram-new.png" alt="Instagram"></a>
            <a href="https://www.tiktok.com/@teacherleoramos" target="_blank" rel="noopener noreferrer" title="TikTok"><img src="https://img.icons8.com/ios-filled/50/ffffff/tiktok.png" alt="TikTok"></a>
            <a href="https://wa.me/5511955582118" target="_blank" rel="noopener noreferrer" title="WhatsApp"><img src="https://img.icons8.com/ios-filled/50/ffffff/whatsapp--v1.png" alt="WhatsApp"></a>
        </div>
        <p><strong>Contato</strong></p>
        <p>Youtube: @teacherleoramos | Telefone - WhatsApp: (11) 95558-2118</p>
        <p>Endereço: São Paulo, SP, Brasil</p>
        <p>CNPJ: 43.226.983/0001-91</p>
        <p>&copy; 2025 | FEATHERED FRIENDS ENGLISH SCHOOL - FFES. Todos os direitos reservados.</p>
    </div>
</footer>

<script>
    // --- BANCO DE QUESTÕES (Organizado por Nível) ---
    const allQuestions = [
        
        // =========================================
        //                 NÍVEL A1 (50 Frases)
        // =========================================

        // Verbo To Be (Erros comuns)
        { level: 'A1', wrong: "I am agree with you.", accepted: ["i agree with you"], explanation: "Não usamos o verbo 'to be' (am) com 'agree'." },
        { level: 'A1', wrong: "She don't like chocolate.", accepted: ["she doesn't like chocolate", "she does not like chocolate"], explanation: "Para 'She' (terceira pessoa), usamos 'doesn't' no Simple Present." },
        { level: 'A1', wrong: "He go to school every day.", accepted: ["he goes to school every day"], explanation: "Adicionamos '-es' ao verbo 'go' na terceira pessoa do singular (He, She, It)." },
        { level: 'A1', wrong: "You is a student.", accepted: ["you are a student"], explanation: "O verbo 'to be' para 'You' é 'are', não 'is'." },
        { level: 'A1', wrong: "They is happy.", accepted: ["they are happy"], explanation: "O verbo 'to be' para 'They' é 'are', não 'is'." },
        { level: 'A1', wrong: "It are cold today.", accepted: ["it is cold today", "it's cold today"], explanation: "O verbo 'to be' para 'It' é 'is'." },
        { level: 'A1', wrong: "I have 20 years old.", accepted: ["i am 20 years old", "i'm 20 years old"], explanation: "Em inglês, usamos o verbo TO BE para idade (I am), não o verbo TER (Have)." },
        { level: 'A1', wrong: "Where are you from?", accepted: ["where are you from?"], explanation: "A frase está correta. Este é um teste de atenção." },

        // Presente Simples (Auxiliares e S)
        { level: 'A1', wrong: "Do she work here?", accepted: ["does she work here"], explanation: "Usamos 'Does' para fazer perguntas na terceira pessoa do singular (She)." },
        { level: 'A1', wrong: "I not have a car.", accepted: ["i don't have a car", "i do not have a car"], explanation: "Usamos o auxiliar 'don't' para negar no Simple Present." },
        { level: 'A1', wrong: "He doesn't works here.", accepted: ["he doesn't work here", "he does not work here"], explanation: "Com o auxiliar 'doesn't', o verbo principal (work) não leva '-s'." },
        { level: 'A1', wrong: "We watches TV every night.", accepted: ["we watch tv every night"], explanation: "Não adicionamos '-es' ao verbo 'watch' para 'We'." },
        { level: 'A1', wrong: "She study English.", accepted: ["she studies english"], explanation: "Para verbos terminados em 'y' após consoante, trocamos por '-ies' na terceira pessoa (She)." },
        { level: 'A1', wrong: "The sun shine every day.", accepted: ["the sun shines every day"], explanation: "'The sun' é 'It', então adicionamos '-s' ao verbo." },
        { level: 'A1', wrong: "What time the store open?", accepted: ["what time does the store open"], explanation: "Perguntas no Simple Present precisam do auxiliar 'does' (store = It)." },
        { level: 'A1', wrong: "My brother like pizza.", accepted: ["my brother likes pizza"], explanation: "'My brother' é 'He', então adicionamos '-s' ao verbo." },
        
        // Plurais e Contáveis/Incontáveis
        { level: 'A1', wrong: "I need a information.", accepted: ["i need some information", "i need information"], explanation: "'Information' é incontável (uncountable). Não se usa 'a' antes dele." },
        { level: 'A1', wrong: "I have many money.", accepted: ["i have much money", "i have a lot of money"], explanation: "'Money' é incontável. Usamos 'much' ou 'a lot of', não 'many'." },
        { level: 'A1', wrong: "There are two sheeps on the field.", accepted: ["there are two sheep on the field"], explanation: "O plural de 'sheep' é 'sheep' (invariável)." },
        { level: 'A1', wrong: "I bought three new furnitures.", accepted: ["i bought three new pieces of furniture", "i bought some new furniture"], explanation: "'Furniture' é incontável (uncountable) em inglês." },
        { level: 'A1', wrong: "Do you have much friends?", accepted: ["do you have many friends"], explanation: "'Friends' é contável (countable). Usamos 'many', não 'much'." },
        { level: 'A1', wrong: "We saw three mouses.", accepted: ["we saw three mice"], explanation: "O plural de 'mouse' é irregular: 'mice'." },

        // Preposições (Locais e simples)
        { level: 'A1', wrong: "I live in the street.", accepted: ["i live on the street"], explanation: "Para nomes de ruas, usamos 'on the street' (EUA) ou 'in the street' (RU), mas 'on' é mais comum em endereços. Aceitamos 'on'." },
        { level: 'A1', wrong: "The book is in the table.", accepted: ["the book is on the table"], explanation: "Quando algo está sobre a superfície, usamos 'on', não 'in'." },
        { level: 'A1', wrong: "I go to work by foot.", accepted: ["i go to work on foot", "i walk to work"], explanation: "Para ir a pé, dizemos 'on foot', não 'by foot'." },
        { level: 'A1', wrong: "He is married with Susan.", accepted: ["he is married to susan", "he's married to susan"], explanation: "Dizemos 'married TO' alguém, e não 'married with'." },
        { level: 'A1', wrong: "I arrive at home.", accepted: ["i arrive home", "i arrived home"], explanation: "Não usamos preposição após 'arrive' quando o destino é 'home' (arrive home)." },
        { level: 'A1', wrong: "I am interested on painting.", accepted: ["i am interested in painting", "i'm interested in painting"], explanation: "A preposição correta após 'interested' é 'in', não 'on'." },
        { level: 'A1', wrong: "We are waiting to the bus.", accepted: ["we are waiting for the bus", "we're waiting for the bus"], explanation: "O verbo 'wait' exige a preposição 'for' (wait for something)." },

        // Pronomes e Adjetivos Possessivos
        { level: 'A1', wrong: "This is her book, not mine.", accepted: ["this is her book not mine"], explanation: "A frase está correta. Este é um teste de atenção." },
        { level: 'A1', wrong: "This is my wife and his car.", accepted: ["this is my wife and her car"], explanation: "O adjetivo possessivo correto para 'wife' (She) é 'her'." },
        { level: 'A1', wrong: "It's my bag.", accepted: ["it is my bag", "it's my bag"], explanation: "A frase está correta (o erro comum é 'its'). Aceitamos 'it's'." },
        { level: 'A1', wrong: "The dog is eating it food.", accepted: ["the dog is eating its food"], explanation: "O adjetivo possessivo de 'it' (o cachorro) é 'its', sem apóstrofo." },
        { level: 'A1', wrong: "That phone is their.", accepted: ["that phone is theirs"], explanation: "O pronome possessivo final é 'theirs', não 'their'." },
        { level: 'A1', wrong: "Give me your keys, please.", accepted: ["give me your keys please"], explanation: "A frase está correta. Este é um teste de atenção." },

        // Adjetivos e Advérbios (Básicos)
        { level: 'A1', wrong: "She is a beautiful woman.", accepted: ["she is a beautiful woman"], explanation: "A frase está correta. Este é um teste de atenção." },
        { level: 'A1', wrong: "He speaks English good.", accepted: ["he speaks english well"], explanation: "'Good' é adjetivo; 'well' é advérbio. Precisamos do advérbio 'well' para modificar o verbo 'speaks'." },
        { level: 'A1', wrong: "The car is expensiver than mine.", accepted: ["the car is more expensive than mine"], explanation: "Para adjetivos longos (expensive), usamos 'more' para o comparativo, não '-er'." },
        { level: 'A1', wrong: "It's too much hot outside.", accepted: ["it's too hot outside", "it is too hot outside"], explanation: "Usamos apenas 'too' para modificar o adjetivo 'hot'." },
        { level: 'A1', wrong: "She sings happy.", accepted: ["she sings happily"], explanation: "Precisamos do advérbio 'happily' para modificar o verbo 'sings'." },
        { level: 'A1', wrong: "I am boring.", accepted: ["i am bored", "i'm bored"], explanation: "'Bored' (entediado) descreve um sentimento. 'Boring' (tedioso) descreve algo que causa tédio." },
        { level: 'A1', wrong: "He is the more tall man.", accepted: ["he is the tallest man"], explanation: "Para o superlativo de adjetivos curtos, usamos 'the' + adjetivo + '-est'." },

        // Perguntas (Ordem básica A1)
        { level: 'A1', wrong: "You live where?", accepted: ["where do you live"], explanation: "A ordem das perguntas Wh- é: Wh-word + Auxiliar + Sujeito + Verbo." },
        { level: 'A1', wrong: "Is you happy?", accepted: ["are you happy"], explanation: "O verbo 'to be' para 'You' é 'are'." },
        { level: 'A1', wrong: "He is doing what?", accepted: ["what is he doing"], explanation: "Em perguntas com 'to be', a ordem é: Wh-word + To Be + Sujeito + Verbo." },
        { level: 'A1', wrong: "She like coffee?", accepted: ["does she like coffee"], explanation: "Perguntas no Simple Present para 'She' precisam do auxiliar 'does'." },
        { level: 'A1', wrong: "The children play now?", accepted: ["are the children playing now"], explanation: "A indicação 'now' exige o Present Continuous (To Be + ING)." },

        // Passado Simples (Básico)
        { level: 'A1', wrong: "Where you went yesterday?", accepted: ["where did you go yesterday"], explanation: "Perguntas no passado precisam do auxiliar 'did' e o verbo volta para a base (go)." },
        { level: 'A1', wrong: "I not saw him.", accepted: ["i didn't see him", "i did not see him"], explanation: "A negação no Simple Past usa 'didn't' e o verbo volta para a base (see)." },
        { level: 'A1', wrong: "She buyed a new dress.", accepted: ["she bought a new dress"], explanation: "O passado de 'buy' é irregular: 'bought'." },
        { level: 'A1', wrong: "Did you ate pizza?", accepted: ["did you eat pizza"], explanation: "Com o auxiliar 'Did', o verbo principal (eat) volta para a base." },
        { level: 'A1', wrong: "We was at the cinema.", accepted: ["we were at the cinema"], explanation: "O verbo 'to be' no passado para 'We' é 'were', não 'was'." },
        
        // Artigos (A/An)
        { level: 'A1', wrong: "I need a umbrella.", accepted: ["i need an umbrella"], explanation: "Usamos 'an' antes de palavras que começam com som de vogal ('umbrella')." },
        { level: 'A1', wrong: "He is an unique person.", accepted: ["he is a unique person"], explanation: "Usamos 'a' antes de palavras que começam com som de consoante ('unique' soa como 'yoo-nique')." },
        { level: 'A1', wrong: "It is an hour walk.", accepted: ["it is an hour walk"], explanation: "A frase está correta, pois 'hour' começa com som de vogal (o 'h' é mudo)." },

        // Uso de There is/There are
        { level: 'A1', wrong: "There is many books.", accepted: ["there are many books"], explanation: "Usamos 'There are' para plurais (many books)." },
        { level: 'A1', wrong: "Are there a book here?", accepted: ["is there a book here"], explanation: "Usamos 'Is there' para o singular (a book)." },
        { level: 'A1', wrong: "There are much water in the glass.", accepted: ["there is much water in the glass", "there is a lot of water in the glass"], explanation: "'Water' é incontável (singular), então usamos 'There is'." },
        
        // =========================================
        //                 NÍVEL A2 (50 Frases)
        // =========================================
        
        // Passado Contínuo e Simples (Interrupção)
        { level: 'A2', wrong: "When I arrive, they was watching TV.", accepted: ["when i arrived they were watching tv"], explanation: "O Passado Simples de 'arrive' é 'arrived'. O 'to be' no passado para 'they' é 'were'." },
        { level: 'A2', wrong: "She was walked when the rain started.", accepted: ["she was walking when the rain started"], explanation: "O Passado Contínuo (To Be + ING) é usado para a ação mais longa (was walking)." },
        { level: 'A2', wrong: "I saw you while you walk to the park.", accepted: ["i saw you while you were walking to the park"], explanation: "Ações paralelas no passado (saw e walking) geralmente usam o Past Continuous para a ação em andamento." },
        { level: 'A2', wrong: "They played football when the lights went out.", accepted: ["they were playing football when the lights went out"], explanation: "Ação em andamento (playing) interrompida por uma ação curta (went out)." },
        { level: 'A2', wrong: "What were you do at 8 pm?", accepted: ["what were you doing at 8 pm"], explanation: "O Past Continuous precisa de To Be + Verbo com ING." },

        // Presente Perfeito (Been vs Gone / For vs Since)
        { level: 'A2', wrong: "She has gone to the store, she'll be back soon.", accepted: ["she has been to the store she'll be back soon"], explanation: "'Gone' (foi e não voltou) é incorreto se ela voltará em breve. Use 'been' (foi e voltou)." },
        { level: 'A2', wrong: "I live here since 2010.", accepted: ["i have lived here since 2010", "i've lived here since 2010"], explanation: "Ações que começaram no passado e continuam no presente usam o Present Perfect (have lived)." },
        { level: 'A2', wrong: "They haven't spoke to us.", accepted: ["they haven't spoken to us", "they have not spoken to us"], explanation: "O Past Participle de 'speak' é 'spoken', não 'spoke'." },
        { level: 'A2', wrong: "We have known each other for ten years ago.", accepted: ["we have known each other for ten years"], explanation: "Não se usa 'ago' com 'for' ou 'since' no Present Perfect." },
        { level: 'A2', wrong: "I haven't saw that movie yet.", accepted: ["i haven't seen that movie yet", "i have not seen that movie yet"], explanation: "O Past Participle de 'see' é 'seen'." },

        // Modais (Can/Could/Should/Must)
        { level: 'A2', wrong: "I can to swim.", accepted: ["i can swim"], explanation: "Verbos modais ('can') são seguidos pelo infinitivo sem 'to' (verbo base)." },
        { level: 'A2', wrong: "You must to study harder.", accepted: ["you must study harder"], explanation: "Verbos modais ('must') são seguidos pelo infinitivo sem 'to' (verbo base)." },
        { level: 'A2', wrong: "Could you help me, please?", accepted: ["could you help me please"], explanation: "A frase está correta. Este é um teste de atenção." },
        { level: 'A2', wrong: "She should listens to her mother.", accepted: ["she should listen to her mother"], explanation: "Verbos modais são seguidos pelo infinitivo sem 'to' (verbo base)." },
        { level: 'A2', wrong: "We should not to go.", accepted: ["we should not go", "we shouldn't go"], explanation: "Verbos modais são seguidos pelo infinitivo sem 'to' (verbo base)." },

        // Preposições (Frasais e Complexas)
        { level: 'A2', wrong: "It depends of the weather.", accepted: ["it depends on the weather"], explanation: "A preposição correta para 'depend' é 'on', não 'of'." },
        { level: 'A2', wrong: "I look forward to see you.", accepted: ["i look forward to seeing you"], explanation: "Após a expressão 'look forward to', o verbo deve vir com ING (seeing)." },
        { level: 'A2', wrong: "Can you explain me this?", accepted: ["can you explain this to me", "can you explain this to me?"], explanation: "O verbo 'explain' exige 'to': Explain something TO someone." },
        { level: 'A2', wrong: "I went to the store for buy milk.", accepted: ["i went to the store to buy milk"], explanation: "Usamos 'to' (infinitivo) para expressar propósito." },
        { level: 'A2', wrong: "He threw the ball in the river.", accepted: ["he threw the ball into the river"], explanation: "Usamos 'into' para indicar movimento para dentro de algo." },
        { level: 'A2', wrong: "We talked about that subject.", accepted: ["we talked about that subject"], explanation: "A frase está correta. Este é um teste de atenção." },

        // Gênero e Artigos (Avançado)
        { level: 'A2', wrong: "The life is difficult sometimes.", accepted: ["life is difficult sometimes"], explanation: "Não usamos 'The' antes de substantivos abstratos ou no sentido geral (life, happiness, music)." },
        { level: 'A2', wrong: "I need a advice.", accepted: ["i need some advice", "i need advice"], explanation: "'Advice' é incontável (uncountable). Não se usa 'a' antes dele." },
        { level: 'A2', wrong: "He loves to play the football.", accepted: ["he loves to play football"], explanation: "Não usamos 'the' antes de nomes de esportes." },
        { level: 'A2', wrong: "I am working as engineer.", accepted: ["i am working as an engineer", "i'm working as an engineer"], explanation: "O singular de profissões precisa do artigo 'a/an'." },
        { level: 'A2', wrong: "She's doctor.", accepted: ["she's a doctor", "she is a doctor"], explanation: "O singular de profissões precisa do artigo 'a/an'." },

        // Verb + Gerúndio (ING) ou Infinitivo
        { level: 'A2', wrong: "I enjoy to read books.", accepted: ["i enjoy reading books"], explanation: "O verbo 'enjoy' é seguido por um Gerúndio (Verbo + ING)." },
        { level: 'A2', wrong: "She finished write the report.", accepted: ["she finished writing the report"], explanation: "O verbo 'finish' é seguido por um Gerúndio (Verbo + ING)." },
        { level: 'A2', wrong: "They decided buying a house.", accepted: ["they decided to buy a house"], explanation: "O verbo 'decide' é seguido por um Infinitivo (to + verbo base)." },
        { level: 'A2', wrong: "I stopped to smoke last year.", accepted: ["i stopped smoking last year"], explanation: "'Stop smoking' significa parar o hábito. 'Stop to smoke' significa parar para fazer uma pausa e fumar." },
        { level: 'A2', wrong: "I want a cup of coffee.", accepted: ["i want a cup of coffee"], explanation: "A frase está correta. Este é um teste de atenção." },

        // Discurso Indireto (Reported Speech - Básico)
        { level: 'A2', wrong: "He said me he was hungry.", accepted: ["he told me he was hungry", "he said that he was hungry"], explanation: "Usamos 'told' (tell) quando mencionamos a quem ele falou (told me). Se usar 'said', o 'me' é opcional/incorreto." },
        { level: 'A2', wrong: "She asked if I live here.", accepted: ["she asked if i lived there"], explanation: "No Discurso Indireto, o tempo verbal geralmente 'recua' (live -> lived) e o local/tempo muda (here -> there)." },
        { level: 'A2', wrong: "They told to us the news.", accepted: ["they told us the news"], explanation: "O verbo 'tell' é transitivo e não usa 'to' antes do objeto (told us)." },

        // Advérbios de Frequência e Ordem de Adjetivos
        { level: 'A2', wrong: "I am late always.", accepted: ["i am always late", "i'm always late"], explanation: "Advérbios de frequência (always) vêm APÓS o verbo 'to be'." },
        { level: 'A2', wrong: "She drives her car careful.", accepted: ["she drives her car carefully"], explanation: "Precisamos do advérbio 'carefully' para modificar o verbo 'drives'." },
        { level: 'A2', wrong: "I have a big red old car.", accepted: ["i have a big old red car"], explanation: "A ordem padrão de adjetivos é: Opinião > Tamanho > Idade > Forma > Cor > Origem." },
        { level: 'A2', wrong: "They often are at home.", accepted: ["they are often at home"], explanation: "Advérbios de frequência (often) vêm APÓS o verbo 'to be'." },
        { level: 'A2', wrong: "He plays very well the piano.", accepted: ["he plays the piano very well"], explanation: "A ordem correta é: Verbo (plays) + Objeto (the piano) + Advérbio (very well)." },

        // Quantificadores (Too/Enough/So/Such)
        { level: 'A2', wrong: "It is too much cold to swim.", accepted: ["it is too cold to swim", "it's too cold to swim"], explanation: "Usamos 'too' (demasiado) antes de adjetivos ('cold'). 'Too much' é para substantivos incontáveis." },
        { level: 'A2', wrong: "I don't have enough time for finish.", accepted: ["i don't have enough time to finish"], explanation: "Usamos 'to' (infinitivo) após 'enough' para expressar o resultado (enough time TO finish)." },
        { level: 'A2', wrong: "She is such nice.", accepted: ["she is so nice"], explanation: "Usamos 'so' antes de adjetivos soltos. 'Such' é para 'such a/an' + adjetivo + substantivo." },
        { level: 'A2', wrong: "It was so a good movie.", accepted: ["it was such a good movie"], explanation: "Usamos 'such a/an' + adjetivo + substantivo." },
        { level: 'A2', wrong: "He drives fast enough.", accepted: ["he drives fast enough"], explanation: "A frase está correta. Este é um teste de atenção." },

        // Voz Passiva (Básico)
        { level: 'A2', wrong: "The letter was write yesterday.", accepted: ["the letter was written yesterday"], explanation: "A Voz Passiva é formada por 'To Be' + Past Participle (write -> written)." },
        { level: 'A2', wrong: "The books were stole.", accepted: ["the books were stolen"], explanation: "O Past Participle de 'steal' é 'stolen', não 'stole'." },
        { level: 'A2', wrong: "The house built in 1990.", accepted: ["the house was built in 1990"], explanation: "Na Voz Passiva, precisamos do auxiliar 'to be' (was)." },
        
        // Verbos Irregulares (Confusão de Formas)
        { level: 'A2', wrong: "I lost the bus.", accepted: ["i missed the bus"], explanation: "Para meios de transporte, usamos 'miss' (perder horário), não 'lose' (perder objeto)." },
        { level: 'A2', wrong: "He putted the keys on the table.", accepted: ["he put the keys on the table"], explanation: "O Simple Past de 'put' é irregular e invariável: 'put'." },
        { level: 'A2', wrong: "She begun her work early.", accepted: ["she began her work early"], explanation: "O Simple Past de 'begin' é 'began', não 'begun' (que é o Past Participle)." },
        { level: 'A2', wrong: "Did you saw the news?", accepted: ["did you see the news"], explanation: "Com o auxiliar 'Did', o verbo volta para a forma base (see)." },
        { level: 'A2', wrong: "We have eaten already.", accepted: ["we have eaten already", "we've eaten already"], explanation: "A frase está correta. Este é um teste de atenção." },
        
        // Pronomes (Who/Whose/Which)
        { level: 'A2', wrong: "Who house is this?", accepted: ["whose house is this"], explanation: "Usamos 'Whose' para perguntar sobre posse (de quem)." },
        { level: 'A2', wrong: "The girl which is wearing a hat is my sister.", accepted: ["the girl who is wearing a hat is my sister"], explanation: "Usamos 'Who' (ou 'that') para pessoas, não 'which'." },
        { level: 'A2', wrong: "The cat that it ate the mouse ran away.", accepted: ["the cat that ate the mouse ran away", "the cat which ate the mouse ran away"], explanation: "Não precisamos de 'it' extra (pronome redundante) após o pronome relativo 'that'." },

        // Condicionais (Básico)
        { level: 'A2', wrong: "If I was you, I would study more.", accepted: ["if i were you i would study more"], explanation: "No segundo condicional, usamos 'were' com 'I/he/she/it' para a cláusula 'If' (subjuntivo)." },
        { level: 'A2', wrong: "If it will rain, we will stay home.", accepted: ["if it rains we will stay home", "if it rains we'll stay home"], explanation: "Não usamos 'will' na cláusula 'If' do Primeiro Condicional. Usamos o Simple Present." },
        { level: 'A2', wrong: "What would you do if you win the lottery?", accepted: ["what would you do if you won the lottery"], explanation: "O Segundo Condicional usa o Simple Past na cláusula 'If' (won)." }

    ];

    let currentLevel = null;
    let filteredQuestions = [];
    let currentQuestion = null;
    let answeredQuestions = new Set(); // Para evitar repetição na mesma sessão

    const questionEl = document.getElementById('question-display');
    const inputEl = document.getElementById('answer-input');
    const feedbackEl = document.getElementById('feedback-display');
    const countCurrent = document.getElementById('q-current');
    const countTotal = document.getElementById('q-total');
    const levelInfo = document.getElementById('level-info');
    const writingContainer = document.getElementById('writing-container');
    const checkButton = document.getElementById('check-button');
    const nextButton = document.getElementById('next-button');

    // Inicialização ao carregar a página
    document.addEventListener('DOMContentLoaded', () => {
        questionEl.textContent = 'Selecione um nível acima para começar!';
        countCurrent.textContent = '--';
        countTotal.textContent = '--';
        levelInfo.textContent = '';
        writingContainer.classList.remove('visible');
        inputEl.disabled = true;
        checkButton.disabled = true;
        nextButton.disabled = true;
        nextButton.style.backgroundColor = '#95a5a6';
        nextButton.style.color = 'white';
    });


    // Função para selecionar o nível (Copiado do reading.html)
    window.selectLevel = function(level, button) {
        // Remove a classe 'active' de todos os botões e adiciona ao clicado
        document.querySelectorAll('.btn-level').forEach(btn => btn.classList.remove('active'));
        button.classList.add('active');

        currentLevel = level;
        filteredQuestions = allQuestions.filter(q => q.level === level);
        answeredQuestions.clear(); // Limpa as respondidas ao trocar de nível

        if (filteredQuestions.length > 0) {
            writingContainer.classList.add('visible');
            inputEl.disabled = false;
            checkButton.disabled = false;
            
            loadNextQuestion(); // Carrega a primeira questão
        } else {
            writingContainer.classList.remove('visible');
            questionEl.textContent = 'Nenhuma questão disponível para este nível.';
        }

        document.getElementById('writing-container').scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
    
    // Carrega a próxima questão (aleatória e não repetida)
    window.loadNextQuestion = function() {
        if (!currentLevel || filteredQuestions.length === 0) return;

        // Se todas as questões foram respondidas, recomeça o ciclo
        if (answeredQuestions.size === filteredQuestions.length) {
            answeredQuestions.clear();
        }

        let availableQuestions = filteredQuestions.filter(q => !answeredQuestions.has(q));
        
        // Se todas estão respondidas (e o set foi limpo), usa a lista completa novamente
        if (availableQuestions.length === 0) {
            availableQuestions = filteredQuestions;
        }

        const randomIndex = Math.floor(Math.random() * availableQuestions.length);
        currentQuestion = availableQuestions[randomIndex];

        questionEl.textContent = `"${currentQuestion.wrong}"`;
        inputEl.value = '';
        feedbackEl.style.display = 'none';
        feedbackEl.className = 'feedback-area';
        inputEl.disabled = false;
        checkButton.disabled = false;
        
        // Atualiza contagem
        countTotal.textContent = filteredQuestions.length;
        countCurrent.textContent = Array.from(answeredQuestions).length + 1;

        // Habilita/desabilita botões e ajusta estilo do Próximo
        checkButton.disabled = false;
        nextButton.disabled = false;
        nextButton.style.backgroundColor = 'var(--cor-acento)';
        nextButton.style.color = 'var(--cor-texto-escuro)';

        levelInfo.innerHTML = `<strong>Nível: ${currentLevel} (${filteredQuestions.length} frases disponíveis)</strong>.`;
        inputEl.focus();
    }

    window.checkAnswer = function() {
        if (!currentQuestion) return;

        const userText = inputEl.value.trim();
        if (!userText) return;

        // Normaliza para comparar: minúsculas e remove pontuação final básica (., !, ?)
        const cleanUser = userText.toLowerCase().replace(/[.!?,]+$/, "").trim(); 
        
        // Normaliza respostas aceitas para comparação
        const isCorrect = currentQuestion.accepted.some(ans => 
            ans.toLowerCase().replace(/[.!?,]+$/, "").trim() === cleanUser
        );

        feedbackEl.style.display = 'block';

        if (isCorrect) {
            feedbackEl.className = 'feedback-area feedback-success';
            feedbackEl.innerHTML = `
                <strong>✔ Correto! Muito bem.</strong><br>
                <em>Você corrigiu para: "${userText}"</em><br>
                <small>${currentQuestion.explanation}</small>
            `;
            // Adiciona a questão ao set de respondidas
            answeredQuestions.add(currentQuestion);
            checkButton.disabled = true; // Desabilita o check após acerto
            
            // Força a atualização do número da questão se acertou
            countCurrent.textContent = Math.min(Array.from(answeredQuestions).length + 1, filteredQuestions.length);
        } else {
            feedbackEl.className = 'feedback-area feedback-error';
            // Mostra a primeira opção aceita como gabarito (após normalizar a exibição)
            const correctedAnswer = currentQuestion.accepted[0].charAt(0).toUpperCase() + currentQuestion.accepted[0].slice(1);
            feedbackEl.innerHTML = `
                <strong>✖ Ainda não.</strong><br>
                Resposta correta: <em>"${correctedAnswer}"</em><br>
                <small>${currentQuestion.explanation}</small>
            `;
            checkButton.disabled = false;
        }
    }

    // Permite apertar Enter para enviar
    inputEl.addEventListener("keypress", function(event) {
        if (event.key === "Enter") {
            event.preventDefault(); // Evita submeter formulário se houver
            checkAnswer();
        }
    });

</script>

</body>
</html>